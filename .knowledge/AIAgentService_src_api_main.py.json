{"is_source_file": true, "format": "Python", "description": "This is a source file implementing a RESTful API for an AI agent service using FastAPI. It includes endpoints for health checks, prompt interpretation with keyword-based intent extraction, and wireframe generation from those intents. The file defines data models, helper functions for intent extraction and wireframe specification, as well as security mechanisms for API key validation.", "external_files": ["fastapi", "pydantic", "starlette.middleware.cors", "os", "re", "uuid", "typing"], "external_methods": ["fastapi.FastAPI", "fastapi.Header", "fastapi.HTTPException", "fastapi.Depends", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field", "pydantic.constr", "os.getenv", "re.search", "uuid.uuid4"], "published": ["health_check", "interpret_prompt", "specify_wireframe"], "classes": [{"name": "PromptRequest", "description": "Model for input prompt to interpret"}, {"name": "Intent", "description": "Model representing extracted intent with type, optional value, and confidence score"}, {"name": "InterpretResponse", "description": "Model encapsulating list of intents resulting from prompt interpretation"}, {"name": "WireframeIntent", "description": "Model for an intent used in wireframe transformation"}, {"name": "WireframeRequest", "description": "Model for requesting wireframe generation from a list of intents"}, {"name": "WireframeSpec", "description": "Model for the generated wireframe's layout, components, and metadata"}, {"name": "WireframeResponse", "description": "Model encapsulating the resulting wireframe specification"}], "methods": [{"name": "Optional[str] get_expected_api_key()", "description": "Retrieve expected API key from environment variable", "scope": "", "scopeKind": ""}, {"name": "require_api_key(authorization: Optional[str] = Header(None, description=\"Bearer token for AI Agent API\"))", "description": "FastAPI dependency to enforce API key security if configured", "scope": "", "scopeKind": ""}, {"name": "float _score_match(prompt_lc: str, synonyms: List[str])", "description": "Compute a simple match score between prompt text and keyword synonyms", "scope": "", "scopeKind": ""}, {"name": "List[Intent] _extract_intents_from_prompt(prompt: str)", "description": "Extract intents from a prompt based on keyword matching", "scope": "", "scopeKind": ""}, {"name": "str _component_id(prefix: str)", "description": "Generate a unique component or element ID with prefix", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] _spec_from_intents(intents: List[WireframeIntent])", "description": "Create a deterministic wireframe specification from a list of intents", "scope": "", "scopeKind": ""}, {"name": "health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "InterpretResponse interpret_prompt(payload: PromptRequest, _: None = Depends(require_api_key))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "WireframeResponse specify_wireframe(payload: WireframeRequest, _: None = Depends(require_api_key))", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["os.getenv", "re.search", "uuid.uuid4", "get_expected_api_key", "require_api_key", "_extract_intents_from_prompt", "_spec_from_intents"], "search-terms": ["FastAPI", "AI Agent API", "interpretation", "wireframe", "intent extraction", "prompt processing", "API security", "deterministic wireframe", "cloud API", "keyword matching"], "state": 2, "file_id": 2, "knowledge_revision": 18, "git_revision": "c9af150eba115bd76accff93eb7aac2175421a99", "revision_history": [{"9": "0ad1557a6e1fe1a673017d698387d20c03a9e07a"}, {"10": "0ad1557a6e1fe1a673017d698387d20c03a9e07a"}, {"18": "c9af150eba115bd76accff93eb7aac2175421a99"}], "ctags": [{"_type": "tag", "name": "Intent", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^class Intent(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "InterpretResponse", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^class InterpretResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PromptRequest", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^class PromptRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "WireframeIntent", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^class WireframeIntent(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "WireframeRequest", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^class WireframeRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "WireframeResponse", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^class WireframeResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "WireframeSpec", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^class WireframeSpec(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_KEYWORDS", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^_KEYWORDS = {$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_component_id", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^def _component_id(prefix: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(prefix: str)"}, {"_type": "tag", "name": "_extract_intents_from_prompt", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^def _extract_intents_from_prompt(prompt: str) -> List[Intent]:$/", "language": "Python", "typeref": "typename:List[Intent]", "kind": "function", "signature": "(prompt: str)"}, {"_type": "tag", "name": "_score_match", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^def _score_match(prompt_lc: str, synonyms: List[str]) -> float:$/", "language": "Python", "typeref": "typename:float", "kind": "function", "signature": "(prompt_lc: str, synonyms: List[str])"}, {"_type": "tag", "name": "_spec_from_intents", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^def _spec_from_intents(intents: List[WireframeIntent]) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(intents: List[WireframeIntent])"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "components", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    components: List[Dict[str, Any]] = Field(..., description=\"Flat list of components with ids\\//", "language": "Python", "typeref": "typename:List[Dict[str, Any]]", "kind": "variable", "scope": "WireframeSpec", "scopeKind": "class"}, {"_type": "tag", "name": "get_expected_api_key", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^def get_expected_api_key() -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"Unique identifier for the generated wireframe\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "WireframeSpec", "scopeKind": "class"}, {"_type": "tag", "name": "intents", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    intents: List[Intent] = Field(default_factory=list, description=\"List of extracted intents\")$/", "language": "Python", "typeref": "typename:List[Intent]", "kind": "variable", "scope": "InterpretResponse", "scopeKind": "class"}, {"_type": "tag", "name": "intents", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    intents: List[WireframeIntent] = Field(..., description=\"Intents to transform into a wirefra/", "language": "Python", "typeref": "typename:List[WireframeIntent]", "kind": "variable", "scope": "WireframeRequest", "scopeKind": "class"}, {"_type": "tag", "name": "interpret_prompt", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^def interpret_prompt(payload: PromptRequest, _: None = Depends(require_api_key)) -> InterpretRes/", "language": "Python", "typeref": "typename:InterpretResponse", "kind": "function", "signature": "(payload: PromptRequest, _: None = Depends(require_api_key))"}, {"_type": "tag", "name": "layout", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    layout: Dict[str, Any] = Field(..., description=\"Layout structure (containers, rows, columns/", "language": "Python", "typeref": "typename:Dict[str, Any]", "kind": "variable", "scope": "WireframeSpec", "scopeKind": "class"}, {"_type": "tag", "name": "metadata", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    metadata: Dict[str, Any] = Field(default_factory=dict, description=\"Additional metadata\")$/", "language": "Python", "typeref": "typename:Dict[str, Any]", "kind": "variable", "scope": "WireframeSpec", "scopeKind": "class"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "prompt", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    prompt: constr(strip_whitespace=True, min_length=1) = Field(..., description=\"User input pro/", "language": "Python", "typeref": "typename:constr(strip_whitespace=True, min_length=1)", "kind": "variable", "scope": "PromptRequest", "scopeKind": "class"}, {"_type": "tag", "name": "require_api_key", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^def require_api_key(authorization: Optional[str] = Header(None, description=\"Bearer token for AI/", "language": "Python", "kind": "function", "signature": "(authorization: Optional[str] = Header(None, description=\"Bearer token for AI Agent API\"))"}, {"_type": "tag", "name": "specify_wireframe", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^def specify_wireframe(payload: WireframeRequest, _: None = Depends(require_api_key)) -> Wirefram/", "language": "Python", "typeref": "typename:WireframeResponse", "kind": "function", "signature": "(payload: WireframeRequest, _: None = Depends(require_api_key))"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    type: str = Field(..., description=\"Intent type\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Intent", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    type: str = Field(..., description=\"Intent type\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "WireframeIntent", "scopeKind": "class"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    value: Any = Field(None, description=\"Optional value for the intent\")$/", "language": "Python", "typeref": "typename:Any", "kind": "variable", "scope": "WireframeIntent", "scopeKind": "class"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    value: Any = Field(None, description=\"Value or payload for the intent\")$/", "language": "Python", "typeref": "typename:Any", "kind": "variable", "scope": "Intent", "scopeKind": "class"}, {"_type": "tag", "name": "wireframe_spec", "path": "/home/kavia/workspace/code-generation/proto-assist-2361-2490/AIAgentService/src/api/main.py", "pattern": "/^    wireframe_spec: Dict[str, Any] = Field(default_factory=dict, description=\"Minimal wireframe /", "language": "Python", "typeref": "typename:Dict[str, Any]", "kind": "variable", "scope": "WireframeResponse", "scopeKind": "class"}], "hash": "27fe465f28b7dbcd0b9d9875599c3dfc", "format-version": 4, "code-base-name": "AIAgentService", "filename": "AIAgentService/src/api/main.py", "fields": [{"name": "_KEYWORDS = {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[Dict[str, Any]] components", "scope": "WireframeSpec", "scopeKind": "class", "description": "unavailable"}, {"name": "str id", "scope": "WireframeSpec", "scopeKind": "class", "description": "unavailable"}, {"name": "List[Intent] intents", "scope": "InterpretResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "List[WireframeIntent] intents", "scope": "WireframeRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str, Any] layout", "scope": "WireframeSpec", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str, Any] metadata", "scope": "WireframeSpec", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "constr(strip_whitespace=True, min_length=1) prompt", "scope": "PromptRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str type", "scope": "Intent", "scopeKind": "class", "description": "unavailable"}, {"name": "Any value", "scope": "WireframeIntent", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str, Any] wireframe_spec", "scope": "WireframeResponse", "scopeKind": "class", "description": "unavailable"}]}